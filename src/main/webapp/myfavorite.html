<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>黑马旅游网-我的收藏</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/common.css">
    <link rel="stylesheet" href="css/index.css">
    <style>
        .tab-content .row > div {
            margin-top: 16px;
        }

        .tab-content {
            margin-bottom: 36px;
        }
    </style>
    <script src="js/jquery-3.3.1.js"></script>
    <script src="js/getParameter.js"></script>
    <script>
        var currentPage = getParameter("currentPage");

        $.post("favorite/showMyFavorite", "currentPage=" + currentPage, function (result) {
            var pageBean = result.data;
            currentPage = pageBean.currentPage;
            var totalPage = pageBean.totalPage;
            var list = pageBean.list;

            //展示数据
            //遍历并展示数据集合
            $.each(list, function (index, element) {
                var route = element.route;
                //展示详情
                $("#home .row").append("<div class=\"col-md-3\">\n" +
                    "                                    <a href=\"route_detail.html?rid=" + route.rid + "\">\n" +
                    "                                        <img src=\"" + route.rimage + "\" alt=\"\">\n" +
                    "                                        <div class=\"has_border\">\n" +
                    "                                            <h3 style='height: 45px'>" + route.rname + "</h3>\n" +
                    "                                            <div class=\"price\">网付价<em>￥</em><strong>" + route.price + "</strong><em>起</em></div>\n" +
                    "                                        </div>\n" +
                    "                                    </a>\n" +
                    "                                </div>")
            });

            //展示页码
            //1.展示首页、上一页，当前页不是第一页的时候
            if (currentPage !== 1) {
                $(".pageNum ul").append("<li><a href=\"myfavorite.html?currentPage=1\">首页</a></li>\n" +
                    "                            <li class=\"threeword\"><a href=\"myfavorite.html?currentPage=" + (currentPage - 1) + "\">上一页</a></li>")
            }

            //2.展示所有页码
            var begin = 1;
            var end = 10;

            //接下来，按照不同的条件，改变begin和end的值
            //1.如果当前页>6,那么begin就要变成当前页-5
            if (currentPage > 6) {
                begin = currentPage - 5;

                //end则变成
                end = currentPage + 4;
            }

            //end一定不能大于总页数，end最大只能是总页数
            if (end > totalPage) {
                end = totalPage
            }

            for (var i = begin; i <= end; i++) {
                //让当前页高亮，如果i等于currentPage则高亮
                if (i === currentPage) {
                    $(".pageNum ul").append("<li style='background-color: orange'><a href=\"javascript:;\">" + i + "</a></li>")
                } else {
                    $(".pageNum ul").append("<li><a href=\"myfavorite.html?currentPage=" + i + "\">" + i + "</a></li>")
                }

            }

            //3.展示下一页、末页,如果当前页不是最后一页的时候
            if (currentPage !== totalPage) {
                $(".pageNum ul").append("<li class=\"threeword\"><a href=\"myfavorite.html?currentPage=" + (currentPage + 1) + "\">下一页</a></li>\n" +
                    "                            <li class=\"threeword\"><a href=\"myfavorite.html?currentPage=" + (totalPage) + "\">末页</a></li>")
            }
        }, "json")
    </script>
</head>
<body>
<!--引入头部-->
<div id="header"></div>
<!-- 排行榜 start-->
<section id="content">
    <section class="hemai_jx">
        <div class="jx_top">
            <div class="jx_tit">
                <img src="images/icon_5.jpg" alt="">
                <span>我的收藏</span>
            </div>
        </div>
        <div class="jx_content">
            <!-- Tab panes -->
            <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="home">
                    <div class="row">

                    </div>
                </div>
            </div>
        </div>
        <div class="pageNum">
            <ul>

            </ul>
        </div>
    </section>
</section>
<!-- 排行榜 end-->

<!--引入尾部-->
<div id="footer"></div>
<!--导入布局js，共享header和footer-->
<script type="text/javascript" src="js/include.js"></script>
</body>
</html>